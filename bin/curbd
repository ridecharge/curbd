#!/usr/bin/env python
import argparse
from curbd import new_curbd


def populate(options):
    new_curbd(options).populate()


def new_parser():
    parser = argparse.ArgumentParser(
        description='Performs operations for Curbd.',
        prog='curbd')
    parser.add_argument('-H', '--host', help='The consul host.', default='consul')
    parser.add_argument('-p', '--port', help='The consul port.', default='8500')
    parser.add_argument('key_prefix', help='Key prefix/folder path.')
    parser.add_argument('config', help='The config file name.')
    parser.set_defaults(func=populate)
    return parser


def main():
    parser = new_parser()
    args = parser.parse_args()
    args.func(args)


if __name__ == '__main__':
    main()
